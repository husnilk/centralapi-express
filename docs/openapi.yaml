openapi: 3.0.4
info:
  title: Sentral Data API
  version: 1.0.0
  description: API untuk mengakses data akademik di Fakultas Teknologi Informasi Universitas Andalas.
  contact:
    name: Tim Pengembang API
    email: api.fti@unand.ac.id
    url: https://fti.unand.ac.id/api-support
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
servers:
  - url: http://localhost:3000/
    description: Local Development Server
  - url: https://api.fti.unand.ac.id/
    description: Production Server
  - url: https://sandbox-api.fti.unand.ac.id/
    description: Sandbox Server
paths:
  /auth/register:
    post:
      summary: Registrasi Pengguna Baru
      tags:
        - Authentication
      description: Endpoint untuk mendaftarkan pengguna baru ke dalam sistem.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                  example: user123
                email:
                  type: string
                  example: user123@example.com
                password:
                  type: string
                  example: securepassword
      responses:
        "201":
          description: Pengguna berhasil didaftarkan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: User registered successfully.
                  user:
                    $ref: "#/components/schemas/User"
        "400":
          description: Permintaan tidak valid. Data yang diberikan tidak lengkap atau salah.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Invalid input data.
  /auth/login:
    post:
      tags:
        - Authentication
      summary: Login Pengguna
      description: Endpoint untuk autentikasi pengguna dan mendapatkan token akses.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                  example: user123
                password:
                  type: string
                  example: securepassword
      responses:
        "200":
          description: Berhasil login dan mendapatkan token akses.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Login successful.
                  token:
                    type: string
                    example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                  user:
                    $ref: "#/components/schemas/User"
        "401":
          description: Gagal autentikasi. Username atau password salah.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Invalid username or password.
  /profile:
    get:
      tags:
        - Profile
      summary: Ambil Profil Pengguna
      description: Endpoint untuk mengambil data profil pengguna yang sudah terautentikasi.
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Berhasil mengambil data profil pengguna.
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    $ref: "#/components/schemas/User"
        "401":
          description: Gagal autentikasi. Token akses tidak valid atau habis masa berlakunya.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Unauthorized access.
    patch:
      tags:
        - Profile
      summary: Perbarui Profil Pengguna
      description: Endpoint untuk memperbarui data profil pengguna yang sudah terautentikasi.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: user123@example.com
                name:
                  type: string
                  example: User Name
      responses:
        "200":
          description: Berhasil memperbarui data profil pengguna.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Profile updated successfully.
                  user:
                    $ref: "#/components/schemas/User"
        "400":
          description: Permintaan tidak valid. Data yang diberikan tidak lengkap atau salah.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Invalid input data.
        "401":
          description: Gagal autentikasi. Token akses tidak valid atau habis masa berlakunya.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Unauthorized access."
  /buildings:
    get:
      tags:
        - Buildings
      summary: Daftar Gedung
      description: Endpoint untuk mengambil daftar gedung yang ada di kampus.
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Berhasil mengambil daftar gedung.
          content:
            application/json:
              schema:
                type: object
                properties:
                  buildings:
                    type: array
                    items:
                      $ref: "#/components/schemas/Building"
        "401":
          description: Gagal autentikasi. API token tidak valid atau habis masa berlakunya.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Unauthorized access.
    "post":
      tags:
        - Buildings
      summary: Tambah Gedung Baru
      description: Endpoint untuk menambahkan gedung baru ke dalam sistem.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: Gedung A
                abbreviation:
                  type: string
                  example: H
                floors:
                  type: integer
                  example: 4
                build_year:
                  type: integer
                  example: 2010
                type:
                  type: string
                  example: Gedung Kuliah Bersama
      responses:
        "201":
          description: Gedung berhasil ditambahkan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Building added successfully.
                  building:
                    $ref: "#/components/schemas/Building"
        "400":
          description: Permintaan tidak valid. Data yang diberikan tidak lengkap atau salah.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Invalid input data.
  /buildings/{building_id}:
    get:
      tags:
        - Buildings
      summary: Detail Gedung
      description: Endpoint untuk mengambil detail gedung berdasarkan ID gedung.
      security:
        - bearerAuth: []
      parameters:
        - name: building_id
          in: path
          required: true
          schema:
            type: integer
          description: ID dari gedung yang ingin diambil detailnya.
      responses:
        "200":
          description: Berhasil mengambil detail gedung.
          content:
            application/json:
              schema:
                type: object
                properties:
                  building:
                    $ref: "#/components/schemas/Building"
        "404":
          description: Gedung tidak ditemukan dengan ID yang diberikan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Building not found.
        "401":
          description: Gagal autentikasi. API token tidak valid atau habis masa berlakunya.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Unauthorized access."
    "patch":
      tags:
        - Buildings
      summary: Perbarui Detail Gedung
      description: Endpoint untuk memperbarui detail gedung berdasarkan ID gedung.
      security:
        - bearerAuth: []
      parameters:
        - name: building_id
          in: path
          required: true
          schema:
            type: integer
          description: ID dari gedung yang ingin diperbarui.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: Gedung A
                abbreviation:
                  type: string
                  example: H
                floors:
                  type: integer
                  example: 4
                build_year:
                  type: integer
                  example: 2010
                type:
                  type: string
                  example: Gedung Kuliah Bersama
      responses:
        "200":
          description: Berhasil memperbarui detail gedung.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Building updated successfully.
                  building:
                    $ref: "#/components/schemas/Building"
        "400":
          description: Permintaan tidak valid. Data yang diberikan tidak lengkap atau salah.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Invalid input data.
        "404":
          description: Gedung tidak ditemukan dengan ID yang diberikan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Building not found.
        "401":
          description: Gagal autentikasi. API token tidak valid atau habis masa berlakunya.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Unauthorized access."
    "delete":
      tags:
        - Buildings
      summary: Hapus Gedung
      description: Endpoint untuk menghapus gedung berdasarkan ID gedung.
      security:
        - bearerAuth: []
      parameters:
        - name: building_id
          in: path
          required: true
          schema:
            type: integer
          description: ID dari gedung yang ingin dihapus.
      responses:
        "200":
          description: Berhasil menghapus gedung.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Building deleted successfully.
        "404":
          description: Gedung tidak ditemukan dengan ID yang diberikan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Building not found.
        "401":
          description: Gagal autentikasi. API token tidak valid atau habis masa berlakunya.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Unauthorized access."
  "/rooms":
    get:
      tags:
        - Rooms
      summary: Daftar Ruangan
      description: Endpoint untuk mengambil daftar ruangan yang ada di kampus.
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Berhasil mengambil daftar ruangan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  rooms:
                    type: array
                    items:
                      $ref: "#/components/schemas/Room"
        "401":
          description: Gagal autentikasi. API token tidak valid atau habis masa berlakunya.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Unauthorized access.
    "post":
      tags:
        - Rooms
      summary: Tambah Ruangan Baru
      description: Endpoint untuk menambahkan ruangan baru ke dalam sistem.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: H1.1
                abbreviation:
                  type: string
                  example: H1.1"
                floor:
                  type: integer
                  example: 1
                number:
                  type: string
                  example: 10
                capacity:
                  type: integer
                  example: 40
                size:
                  type: integer
                  example: 60
                location:
                  type: string
                  example: Lantai 1, Gedung H
                public:
                  type: integer
                  example: 1
                status:
                  type: integer
                  example: 1
                availability:
                  type: integer
                  example: 1
                type:
                  type: string
                  example: Kelas
                building_id:
                  type: integer
                  example: 10
      responses:
        "201":
          description: Ruangan berhasil ditambahkan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Room added successfully.
                  room:
                    $ref: "#/components/schemas/Room"
        "400":
          description: Permintaan tidak valid. Data yang diberikan tidak lengkap atau salah.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Invalid input data.
  /rooms/{room_id}:
    get:
      tags:
        - Rooms
      summary: Detail Ruangan
      description: Endpoint untuk mengambil detail ruangan berdasarkan ID ruangan.
      security:
        - bearerAuth: []
      parameters:
        - name: room_id
          in: path
          required: true
          schema:
            type: integer
          description: ID dari ruangan yang ingin diambil detailnya.
      responses:
        "200":
          description: Berhasil mengambil detail ruangan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  room:
                    $ref: "#/components/schemas/Room"
        "404":
          description: Ruangan tidak ditemukan dengan ID yang diberikan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Room not found.
        "401":
          description: Gagal autentikasi. API token tidak valid atau habis masa berlakunya.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Unauthorized access."
    "patch":
      tags:
        - Rooms
      summary: Perbarui Detail Ruangan
      description: Endpoint untuk memperbarui detail ruangan berdasarkan ID ruangan.
      security:
        - bearerAuth: []
      parameters:
        - name: room_id
          in: path
          required: true
          schema:
            type: integer
          description: ID dari ruangan yang ingin diperbarui.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: H1.1
                abbreviation:
                  type: string
                  example: H1.1"
                floor:
                  type: integer
                  example: 1
                number:
                  type: string
                  example: 10
                capacity:
                  type: integer
                  example: 40
                size:
                  type: integer
                  example: 60
                location:
                  type: string
                  example: Lantai 1, Gedung H
                public:
                  type: integer
                  example: 1
                status:
                  type: integer
                  example: 1
                availability:
                  type: integer
                  example: 1
                type:
                  type: string
                  example: Kelas
                building_id:
                  type: integer
                  example: 10
      responses:
        "200":
          description: Berhasil memperbarui detail ruangan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Room updated successfully.
                  room:
                    $ref: "#/components/schemas/Room"
        "400":
          description: Permintaan tidak valid. Data yang diberikan tidak lengkap atau salah.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Invalid input data.
        "404":
          description: Ruangan tidak ditemukan dengan ID yang diberikan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Room not found.
        "401":
          description: Gagal autentikasi. API token tidak valid atau habis masa berlakunya.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Unauthorized access."
    "delete":
      tags:
        - Rooms
      summary: Hapus Ruangan
      description: Endpoint untuk menghapus ruangan berdasarkan ID ruangan.
      security:
        - bearerAuth: []
      parameters:
        - name: room_id
          in: path
          required: true
          schema:
            type: integer
          description: ID dari ruangan yang ingin dihapus.
      responses:
        "200":
          description: Berhasil menghapus ruangan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Room deleted successfully.
        "404":
          description: Ruangan tidak ditemukan dengan ID yang diberikan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Room not found.
        "401":
          description: Gagal autentikasi. API token tidak valid atau habis masa berlakunya.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Unauthorized access."
tags:
  - name: Authentication
    description: Endpoint untuk registrasi, login, dan manajemen profil pengguna.
  - name: Profile
    description: Endpoint untuk mengambil dan memperbarui data profil pengguna.
  - name: Buildings
    description: Endpoint untuk manajemen data gedung di kampus.
  - name: Rooms
    description: Endpoint untuk manajemen data ruangan di gedung kampus.
  - name: Faculties
    description: Endpoint untuk manajemen data fakultas di universitas.
  - name: Departments
    description: Endpoint untuk manajemen data jurusan di fakultas.
  - name: Staff
    description: Endpoint untuk manajemen data staf di universitas.
  - name: Lecturers
    description: Endpoint untuk manajemen data dosen di universitas.
  - name: Students
    description: Endpoint untuk manajemen data mahasiswa di universitas.

components:
  schemas:
    User:
      type: object
      properties:
        id:
          type: integer
          example: 1
        username:
          type: string
          example: user123
        email:
          type: string
          example: user123@example.com

    Building:
      type: object
      properties:
        id:
          type: integer
          example: 10
        name:
          type: string
          example: Gedung A
        abbreviation:
          type: string
          example: H
        floors:
          type: integer
          example: 4
        build_year:
          type: integer
          example: 2010
        type:
          type: string
          example: Gedung Kuliah Bersama
        created_at:
          type: string
          format: date-time
          example: "2023-01-15T08:00:00Z"
        updated_at:
          type: string
          format: date-time
          example: "2023-06-20T10:30:00Z"
    Room:
      type: object
      properties:
        id:
          type: integer
          example: 101
        name:
          type: string
          example: H1.1
        abbreviation:
          type: string
          example: H1.1
        floor:
          type: integer
          example: 1
        number:
          type: string
          example: 10
        capacity:
          type: integer
          example: 40
        size:
          type: integer
          example: 60
        location:
          type: string
          example: Lantai 1, Gedung H
        public:
          type: integer
          example:
        status:
          type: integer
          example: 1
        availability:
          type: integer
          example: 1
        type:
          type: string
          example: Kelas
        building_id:
          type: integer
          example: 10
        created_at:
          type: string
          format: date-time
          example: "2023-01-15T08:00:00Z"
        updated_at:
          type: string
          format: date-time
          example: "2023-06-20T10:30:00Z"
    Faculty:
      type: object
      properties:
        id:
          type: integer
          example: 5
        name:
          type: string
          example: Fakultas Teknologi Informasi
        abbreviation:
          type: string
          example: FTI
        type:
          type: string
          example: Fakultas
        created_at:
          type: string
          format: date-time
          example: "2023-01-15T08:00:00Z"
        updated_at:
          type: string
          format: date-time
          example: "2023-06-20T10:30:00Z"
    Department:
      type: object
      properties:
        id:
          type: integer
          example: 15
        name:
          type: string
          example: Teknik Informatika
        abbreviation:
          type: string
          example: TI
        name_en:
          type: string
          example: Informatics Engineering
        abbreviation_en:
          type: string
          example: IE
        national_code:
          type: string
          example: 12345
        faculty_id:
          type: integer
          example: 5
        created_at:
          type: string
          format: date-time
          example: "2023-01-15T08:00:00Z"
        updated_at:
          type: string
          format: date-time
          example: "2023-06-20T10:30:00Z"
    Staff:
      type: object
      properties:
        id:
          type: integer
          example: 1001
        name:
          type: string
          example: Budi Santoso
        nik:
          type: string
          example: 3172012345678901
        nip:
          type: string
          example: 1987654321
        karpeg:
          type: string
          example: 1234567890
        npwp:
          type: string
          example: 09.123.456.7-890.000
        gender:
          type: string
          example: L
        birthday:
          type: string
          format: date
          example: 1980-05-15
        birthplace:
          type: string
          example: Jakarta
        phone:
          type: string
          example: +6281234567890
        address:
          type: string
          example: Jl. Merdeka No. 10, Jakarta
        department_id:
          type: integer
          example: 15
        marital_status:
          type: string
          example: Married
        religion:
          type: string
          example: Islam
        employment_status:
          type: string
          example: Permanent
        status:
          type: integer
          example: 1
    Lecturer:
      type: object
      properties:
        id:
          type: integer
          example: 1001
        name:
          type: string
          example: Budi Santoso
        nik:
          type: string
          example: 3172012345678901
        nip:
          type: string
          example: 1987654321
        nidn:
          type: string
          example: 0012345601
        karpeg:
          type: string
          example: 1234567890
        npwp:
          type: string
          example: 09.123.456.7-890.000
        gender:
          type: string
          example: L
        birthday:
          type: string
          format: date
          example: 1980-05-15
        birthplace:
          type: string
          example: Jakarta
        phone:
          type: string
          example: +6281234567890
        address:
          type: string
          example: Jl. Merdeka No. 10, Jakarta
        department_id:
          type: integer
          example: 15
        marital_status:
          type: string
          example: Married
        religion:
          type: string
          example: Islam
        employment_status:
          type: string
          example: Permanent
        status:
          type: integer
          example: 1
    Student:
      type: object
      properties:
        id:
          type: integer
          example: 1001
        name:
          type: string
          example: Budi Santoso
        nik:
          type: string
          example: 3172012345678901
        nim:
          type: string
          example: 1987654321
        year:
          type: integer
          example: 2000
        gender:
          type: string
          example: L
        birthday:
          type: string
          format: date
          example: 1980-05-15
        birthplace:
          type: string
          example: Jakarta
        phone:
          type: string
          example: +6281234567890
        address:
          type: string
          example: Jl. Merdeka No. 10, Jakarta
        department_id:
          type: integer
          example: 15
        marital_status:
          type: string
          example: Married
        religion:
          type: string
          example: Islam
        status:
          type: integer
          example: 1
        counselor_id:
          type: integer
          example: 2001
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
    apiToken:
      type: apiKey
      in: header
      name: X-API-KEY
