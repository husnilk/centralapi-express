// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id                Int       @id @default(autoincrement())
  username          String    @unique
  password          String
  name              String?
  email             String    @unique
  email_verified_at DateTime?
  type              String    @default("user")
  is_active         Boolean   @default(true)
  avatar            String?
  photo             String?
  remember_token    String?
  created_at        DateTime  @default(now())
  updated_at        DateTime  @updatedAt
}

model Building {
  id           Int      @id @default(autoincrement())
  name         String
  abbreviation String
  floors       Int
  build_year   Int
  type         String
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
  rooms        Room[]
}

model Room {
  id           Int      @id @default(autoincrement())
  name         String
  abbreviation String
  floor        Int
  number       Int?
  capacity     Int?
  size         String
  location     String
  public       Int
  status       Int
  availability Int
  type         String
  building_id  Int
  building     Building @relation(fields: [building_id], references: [id])
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}

model Faculty {
  id           Int          @id @default(autoincrement())
  name         String
  abbreviation String
  type         String
  created_at   DateTime     @default(now())
  updated_at   DateTime     @updatedAt
  departments  Department[]
}

model Department {
  id              Int        @id @default(autoincrement())
  name            String
  abbreviation    String
  name_en         String
  abbreviation_en String
  national_code   String
  faculty_id      Int
  faculty         Faculty    @relation(fields: [faculty_id], references: [id])
  created_at      DateTime   @default(now())
  updated_at      DateTime   @updatedAt
  lecturers       Lecturer[]
  staffs          Staff[]
  students        Student[]
}

model Staff {
  id               Int        @id @default(autoincrement())
  nik              String
  name             String
  nip              String?
  karpeg           String?
  npwp             String?
  gender           String?
  birthday         DateTime?
  birthplace       String?
  phone            String?
  address          String?
  department_id    Int
  department       Department @relation(fields: [department_id], references: [id])
  photo            String?
  marital_status   String?
  religion         String?
  employment_status  String?
  status           Int        @default(1)
  created_at       DateTime   @default(now())
  updated_at       DateTime   @updatedAt
}
model Lecturer {
  id               Int        @id @default(autoincrement())
  nik              String
  name             String
  nip              String?
  nidn             String?
  karpeg           String?
  npwp             String?
  gender           String?
  birthday         DateTime?
  birthplace       String?
  phone            String?
  address          String?
  department_id    Int
  department       Department @relation(fields: [department_id], references: [id])
  photo            String?
  marital_status   String?
  religion         String?
  association_type String?
  status           Int        @default(1)
  students         Student[]
  created_at       DateTime   @default(now())
  updated_at       DateTime   @updatedAt
}

model Student {
  id             Int        @id @default(autoincrement())
  nik            String
  nim            String     @unique
  name           String
  year           Int
  gender         String?
  birthday       DateTime?
  birthplace     String?
  phone          String?
  address        String?
  department_id  Int
  department     Department @relation(fields: [department_id], references: [id])
  photo          String?
  marital_status String?
  religion       String?
  status         Int        @default(1)
  counselor_id   Int?
  counselor      Lecturer?  @relation(fields: [counselor_id], references: [id])
  created_at     DateTime   @default(now())
  updated_at     DateTime   @updatedAt
}


model ApiKey {
  id             Int     @id @default(autoincrement())
  apikey         String  @unique @default(uuid())
  name           String
  created_at     DateTime   @default(now())
  updated_at     DateTime   @updatedAt
}